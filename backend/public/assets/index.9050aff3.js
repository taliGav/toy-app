import{r as _,o as d,c as y,a as $,F as E,b as s,d as a,e as g,f as C,w as h,v as w,g as x,h as O,i as S,j as T,t as u,k as F,l as A,m as B,n as L,p as D,q as P,s as U,u as R}from"./vendor.57657a5b.js";const V=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const n of r)if(n.type==="childList")for(const c of n.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function o(r){const n={};return r.integrity&&(n.integrity=r.integrity),r.referrerpolicy&&(n.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?n.credentials="include":r.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function i(r){if(r.ep)return;r.ep=!0;const n=o(r);fetch(r.href,n)}};V();var p=(e,t)=>{const o=e.__vccOpts||e;for(const[i,r]of t)o[i]=r;return o};const q={name:"App",data(){return{msg:"welcome"}}},M=s("h1",null,"HELLO MISTER TOY",-1);function J(e,t,o,i,r,n){const c=_("router-view");return d(),y(E,null,[M,$(c)],64)}var j=p(q,[["render",J]]);const z={methods:{goToToyApp(){this.$router.push("/toy")},goToAbout(){this.$router.push("/about")}}},H={class:"home"},Y=a(" HOME PAGE ");function G(e,t,o,i,r,n){return d(),y("section",H,[Y,s("button",{onClick:t[0]||(t[0]=(...c)=>n.goToToyApp&&n.goToToyApp(...c)),class:"btn btn-primary"},"Toy App"),s("button",{onClick:t[1]||(t[1]=(...c)=>n.goToAbout&&n.goToAbout(...c)),class:"btn btn-primary"},"About")])}var K=p(z,[["render",G]]);const W={},Q={class:"about"},X=s("h1",null,"This is an about page",-1),Z=[X];function tt(e,t,o,i,r,n){return d(),y("div",Q,Z)}var et=p(W,[["render",tt]]);const ot={query:f,get:st,post:nt,put:it,remove:lt,postMany:rt,load:at,store:ut};function f(e,t=1500){var o=JSON.parse(localStorage.getItem(e))||[];return new Promise((i,r)=>{setTimeout(()=>{i(o)},t)})}function st(e,t){return f(e).then(o=>o.find(i=>i._id===t))}function nt(e,t){return console.log("here?",t),t._id=ct(),f(e).then(o=>(o.push(t),k(e,o),t))}function rt(e,t){return f(e).then(o=>(o.push(...t),k(e,o),o))}function it(e,t){return f(e).then(o=>{const i=o.findIndex(r=>r._id===t._id);return o.splice(i,1,t),k(e,o),t})}function lt(e,t){return f(e).then(o=>{const i=o.findIndex(r=>r._id===t);if(i===-1)return Promise.reject(`Unknown Entity ${e} with Id: ${t}`);o.splice(i,1),k(e,o)})}function k(e,t){localStorage.setItem(e,JSON.stringify(t))}function ct(e=8){for(var t="",o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",i=0;i<e;i++)t+=o.charAt(Math.floor(Math.random()*o.length));return t}function at(e){var t=localStorage.getItem(e);return t?JSON.parse(t):null}function ut(e,t){localStorage[e]=JSON.stringify(t)}const dt=["great toy","excellent"],v="/api/toy/",m={query:yt,getById:pt,remove:mt,save:_t,getNewToy:ft};window.theToyService=m;window.ss=ot;function yt(e){return console.log("filterBy",e),g.get(v,{params:e}).then(t=>t.data)}function pt(e){return g.get(v+e).then(t=>{let o=t.data;return console.log("toy in service",o),o.reviews=dt,o})}function mt(e){return g.delete(v+e)}function _t(e){const t=JSON.parse(JSON.stringify(e));return t._id?g.put(v+t._id,t):g.post(v,t)}function ft(e="",t="",o=100,i=[]){return{_id:e,name:t,price:o,labels:i,createdAt:"",inStock:!0}}const ht={name:"toy-filter",data(){return{filterBy:{name:"",isInStock:!1,labels:[],sortBy:""}}},computed:{},methods:{setFilter(){console.log("set filter on",this.filterBy),this.$emit("setFilter",JSON.parse(JSON.stringify(this.filterBy)))},isInStock(){let e=!this.filterBy.isInStock;this.filterBy.isInStock=e,console.log("stockStatus",e),this.setFilter()}}},gt={class:"toy-filter"},vt={class:"in-stock-input"},bt=s("label",{for:"scales"},"In stock",-1),Tt=a(" Labels: "),$t=O('<option value="On wheels">On wheels</option><option value="Box game">Box game</option><option value="Art">Art</option><option value="Baby">Baby</option><option value="Doll">Doll</option><option value="Puzzle">Puzzle</option><option value="Outdoor">Outdoor</option>',7),kt=[$t],St={class:"toy-sort"},wt={for:"toy"},Bt=a(" Sort By: "),xt=s("option",{value:"time"},"Time",-1),Et=s("option",{value:"name"},"Name",-1),At=s("option",{value:"price"},"Price",-1),It=[xt,Et,At];function Nt(e,t,o,i,r,n){const c=C("focus");return d(),y("section",gt,[h(s("input",{"onUpdate:modelValue":t[0]||(t[0]=l=>r.filterBy.name=l),onInput:t[1]||(t[1]=(...l)=>n.setFilter&&n.setFilter(...l)),type:"text",class:"form-input",placeholder:"Search toy name..."},null,544),[[c],[w,r.filterBy.name]]),s("div",vt,[s("input",{type:"checkbox",onChange:t[2]||(t[2]=(...l)=>n.isInStock&&n.isInStock(...l)),id:"isInStock",name:"isInStock"},null,32),bt]),s("label",null,[Tt,h(s("select",{onChange:t[3]||(t[3]=(...l)=>n.setFilter&&n.setFilter(...l)),multiple:"","onUpdate:modelValue":t[4]||(t[4]=l=>r.filterBy.labels=l)},kt,544),[[x,r.filterBy.labels]]),s("div",St,[s("label",wt,[Bt,h(s("select",{onChange:t[5]||(t[5]=(...l)=>n.setFilter&&n.setFilter(...l)),"onUpdate:modelValue":t[6]||(t[6]=l=>r.filterBy.sortBy=l)},It,544),[[x,r.filterBy.sortBy]])])])])])}var Ct=p(ht,[["render",Nt]]);const Ot={},Ft={class:"custom-card flex flex-col gap-1 items-center"};function Lt(e,t){return d(),y("article",Ft,[s("header",null,[S(e.$slots,"header",{},void 0,!0)]),s("main",null,[S(e.$slots,"default",{},void 0,!0)]),s("footer",null,[S(e.$slots,"footer",{},void 0,!0)])])}var I=p(Ot,[["render",Lt],["__scopeId","data-v-78833dbb"]]);const Dt={name:"toy-preview",props:{toy:Object},components:{customCard:I},computed:{stock(){return this.toy.inStock?"Yes":"No"}},methods:{goToDetail(){this.$router.push(`/toy/${this.toy._id}`)},goToEdit(){this.$router.push(`/toy/edit/${this.toy._id}`)},removeToy(e){this.$emit("removeToy",e)}}},Pt={class:"toy-preview"},Ut=s("span",{class:"fw-bold"},"Toy Name:",-1),Rt=s("span",{class:"fw-bold"},"Available in stock:",-1),Vt=s("span",{class:"fw-bold"},"Price:",-1),qt={class:"btn-group"};function Mt(e,t,o,i,r,n){const c=_("custom-card");return d(),y("li",Pt,[$(c,null,{header:T(()=>[s("p",null,[Ut,a(" "+u(o.toy.name),1)]),s("p",null,[Rt,a(" "+u(n.stock),1)]),s("p",null,[Vt,a(" "+u(e.$filters.currencyUSD(o.toy.price)),1)])]),footer:T(()=>[s("div",qt,[s("button",{onClick:t[0]||(t[0]=(...l)=>n.goToEdit&&n.goToEdit(...l)),class:"btn btn-primary"},"edit"),s("button",{onClick:t[1]||(t[1]=(...l)=>n.goToDetail&&n.goToDetail(...l)),class:"btn btn-info"},"details"),s("button",{onClick:t[2]||(t[2]=l=>n.removeToy(o.toy._id)),class:"btn btn-danger"},"delete")])]),_:1})])}var Jt=p(Dt,[["render",Mt]]);const jt={props:{toys:{type:Array,required:!0}},components:{toyPreview:Jt},methods:{removeToy(e){this.$emit("removeToy",e)}}},zt={class:"toy-list clean-list grid gap-1"};function Ht(e,t,o,i,r,n){const c=_("toy-preview");return d(),y("ul",zt,[(d(!0),y(E,null,F(o.toys,l=>(d(),A(c,{onRemoveToy:n.removeToy,toy:l,key:l._id},null,8,["onRemoveToy","toy"]))),128))])}var Yt=p(jt,[["render",Ht]]);const Gt={name:"toy-app",data(){return{filterBy:null}},computed:{toys(){return this.$store.getters.toys}},created(){this.loadToys()},methods:{loadToys(){this.$store.dispatch({type:"loadToys"})},setFilter(e){this.filterBy=e,this.$store.dispatch({type:"filter",filterBy:e})},goToEdit(){this.$router.push("/toy/edit")},removeToy(e){console.log("Removing...",e),this.$store.dispatch({type:"removeToy",id:e})}},components:{toyList:Yt,toyFilter:Ct},mounted(){}},Kt={class:"toy-app container flex flex-col gap-1"};function Wt(e,t,o,i,r,n){const c=_("toy-filter"),l=_("toy-list");return d(),y("section",Kt,[s("button",{onClick:t[0]||(t[0]=(...N)=>n.goToEdit&&n.goToEdit(...N)),class:"btn btn-secondary"},"Add a new toy"),$(c,{onSetFilter:n.setFilter},null,8,["onSetFilter"]),n.toys?(d(),A(l,{key:0,onRemoveToy:n.removeToy,toys:n.toys},null,8,["onRemoveToy","toys"])):B("",!0)])}var Qt=p(Gt,[["render",Wt]]);const Xt={name:"toy-detail",data(){return{toy:null}},created(){const{id:e}=this.$route.params;console.log(e),m.getById(e).then(t=>{console.log("getById toy",t),this.toy=t})},components:{customCard:I},computed:{labels(){if(!!this.toy.labels)return console.log("this.toy.labels",this.toy.labels),this.toy.labels.join(", ")},stock(){return this.toy.inStock?"Yes":"No"},reviews(){return console.log("this.toy.reviews.",this.toy.reviews),this.toy.reviews.join(", ")},updateTime(){return new Date(this.toy.createdAt).toLocaleString()}},methods:{goBack(){this.$router.push("/toy")},goToEdit(){this.$router.push(`/toy/edit/${this.toy._id}`)},removeToy(e){console.log("Removing...",e),this.$store.dispatch({type:"removeToy",id:e}).then(()=>{this.$router.push("/toy")})}}},Zt={key:0,class:"toy-details flex flex-col items-center gap-2"},te=s("span",{class:"fw-bold"},"name:",-1),ee=s("span",{class:"fw-bold"},"inStock:",-1),oe=s("span",{class:"fw-bold"},"Price:",-1),se=s("span",{class:"fw-bold"},"Serial Number:",-1),ne=s("span",{class:"fw-bold"},"Updated at:",-1),re=s("span",{class:"fw-bold"},"Toy Name:",-1),ie=s("span",{class:"fw-bold"},"Toy Labels:",-1),le=s("span",{class:"fw-bold"},"Toy Price:",-1),ce=s("span",{class:"fw-bold"},"Available in stock:",-1),ae=s("span",{class:"fw-bold"},"Reviews:",-1),ue={class:"btn-group"};function de(e,t,o,i,r,n){const c=_("custom-card");return r.toy?(d(),y("section",Zt,[s("article",null,[s("p",null,[te,a(" "+u(r.toy.name),1)]),s("p",null,[ee,a(" "+u(r.toy.inStock),1)]),s("p",null,[oe,a(" "+u(e.$filters.currencyUSD(r.toy.price)),1)])]),$(c,null,{header:T(()=>[s("p",null,[se,a(" "+u(r.toy._id),1)]),s("p",null,[ne,a(" "+u(n.updateTime),1)]),s("p",null,[re,a(" "+u(r.toy.name),1)]),s("p",null,[ie,a(" "+u(n.labels),1)]),s("p",null,[le,a(" "+u(e.$filters.currencyUSD(r.toy.price)),1)]),s("p",null,[ce,a(" "+u(n.stock),1)]),s("p",null,[ae,a(" "+u(n.reviews),1)])]),footer:T(()=>[s("div",ue,[s("button",{onClick:t[0]||(t[0]=(...l)=>n.goToEdit&&n.goToEdit(...l)),class:"btn btn-primary"},"edit"),s("button",{onClick:t[1]||(t[1]=l=>n.removeToy(r.toy._id)),class:"btn btn-danger"},"delete")])]),_:1}),s("button",{onClick:t[2]||(t[2]=(...l)=>n.goBack&&n.goBack(...l)),class:"btn btn-primary"},"go back")])):B("",!0)}var ye=p(Xt,[["render",de]]);const pe={name:"toy-edit",data(){return{toyToEdit:null}},created(){const{id:e}=this.$route.params;e?(console.log("id",e),m.getById(e).then(t=>{this.toyToEdit=t})):this.toyToEdit=m.getNewToy(),console.log("toyToEdit created",this.toyToEdit)},methods:{goBack(){this.$router.push("/toy")},saveToy(){this.toyToEdit.createdAt=Date.now(),console.log("toyToEdit in save",this.toyToEdit),this.$store.dispatch({type:"saveToy",toy:this.toyToEdit}).then(()=>{this.$router.push("/toy")})}}},me={key:0,class:"toy-edit py-2"},_e={class:"form-control"},fe=s("label",{for:"txt",class:"form-label"},"Toy Name",-1),he={class:"form-control"},ge=s("label",{for:"speed",class:"form-label"},"Toy Price ($)",-1),ve={class:"btn-group"},be=s("button",{class:"btn btn-info"},"save",-1);function Te(e,t,o,i,r,n){return r.toyToEdit?(d(),y("section",me,[s("form",{onSubmit:t[3]||(t[3]=L((...c)=>n.saveToy&&n.saveToy(...c),["prevent"])),class:"form"},[s("div",_e,[fe,h(s("input",{required:"","onUpdate:modelValue":t[0]||(t[0]=c=>r.toyToEdit.name=c),id:"txt",type:"text",class:"form-input",placeholder:"Enter your toy name here..."},null,512),[[w,r.toyToEdit.name]])]),s("div",he,[ge,h(s("input",{required:"","onUpdate:modelValue":t[1]||(t[1]=c=>r.toyToEdit.price=c),id:"speed",type:"number",class:"form-input"},null,512),[[w,r.toyToEdit.price,void 0,{number:!0}]])]),s("div",ve,[be,s("button",{type:"button",onClick:t[2]||(t[2]=(...c)=>n.goBack&&n.goBack(...c)),class:"btn btn-danger-text"},"go back")])],32)])):B("",!0)}var $e=p(pe,[["render",Te]]);const ke=D({history:P(),linkActiveClass:"active",routes:[{path:"/",name:"home",component:K},{path:"/toy",name:"toy-app",component:Qt},{path:"/toy/:id",name:"toy-details",component:ye},{path:"/toy/edit/:id?",name:"toy-edit",component:$e},{path:"/about",name:"about",component:et}]}),Se={state:{toys:null,isLoading:!1,filterBy:{name:"",isInStock:!1}},getters:{toys(e){return e.toys},isLoading(e){return e.isLoading},toysCount({toys:e}){return e.length}},mutations:{setToys(e,{toys:t}){console.log("state mutation toys",t),e.toys=t},setIsLoading(e,{isLoading:t}){e.isLoading=t},setFilter(e,{filterBy:t}){e.filterBy=t},removeToy(e,{id:t}){const o=e.toys.findIndex(i=>i._id===t);e.toys.splice(o,1)},saveToy(e,{toy:t}){console.log("state",e.toys),console.log("saveToy mutation",t);let o=t._id;console.log("toyId",o);const i=e.toys.findIndex(r=>r._id===o);console.log("idx",i),i<0&&e.toys.push(t),e.toys.splice(i,1,t),console.log("state",e.toys)}},actions:{loadToys({commit:e,state:t}){m.query(t.filterBy).then(o=>{console.log("toys",o),e({type:"setToys",toys:o})})},filter({commit:e,dispatch:t},{filterBy:o}){e({type:"setFilter",filterBy:o}),t({type:"loadToys"})},saveToy(e,{toy:t}){return console.log("toy",t),m.save(t).then(o=>(console.log("context.state.toys",e.state.toys),console.log("savedToy",o),e.commit({type:"saveToy",toy:o}),o)).catch(o=>{throw console.error("Cannot Add Toy",o),o})},removeToy(e,t){return m.remove(t.id).then(()=>{e.commit(t)}).catch(o=>{throw console.error("Cannot remove Toy",o),o})}}},we=U({strict:!0,state:{count:1030930},getters:{countForDisplay(e){return e.count.toLocaleString()}},mutations:{changeCount(e,t){console.log("Payload",t),e.count+=t.by}},actions:{incLater(e){setTimeout(()=>{e.commit({type:"changeCount",by:1})},1e3)}},modules:{toyStore:Se}});const Be={mounted:e=>{e.focus()}},b=R(j);b.use(ke);b.use(we);b.mount("#app");b.directive("focus",Be);b.config.globalProperties.$filters={currencyUSD(e){return"$"+e}};
